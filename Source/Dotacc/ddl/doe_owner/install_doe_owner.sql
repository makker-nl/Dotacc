CLEAR SCREEN;
Prompt Creating tables
----------------------
CREATE TABLE DOE_CUSTOMERS
(
ID NUMBER NOT NULL,
TITLE VARCHAR2(10),
FIRST_NAME VARCHAR2(400),
LAST_NAME VARCHAR2(400) NOT NULL,
GENDER VARCHAR2(1) NOT NULL,
BIRTH_DATE DATE NOT NULL
)
;

CREATE TABLE DOE_ADDRESSES
(
ID NUMBER NOT NULL,
ADRESS_LINE1 VARCHAR2(100),
ADRESS_LINE2 VARCHAR2(100),
ADRESS_LINE3 VARCHAR2(4000),
POSTAL_CODE VARCHAR2(10),
CITY VARCHAR2(40),
COUNTRY VARCHAR2(40)
)
;

CREATE TABLE DOE_PARTY_ADDRESSES
(
ID NUMBER NOT NULL,
START_DATE DATE NOT NULL,
END_DATE DATE,
CMR_ID NUMBER,
EMP_ID NUMBER,
ADS_ID NUMBER NOT NULL,
ATE_ID NUMBER NOT NULL
)
;

CREATE TABLE DOE_ADDRESS_TYPES
(
ID NUMBER NOT NULL,
CODE VARCHAR2(10),
DESCRIPTION VARCHAR2(255)
)
;

CREATE TABLE DOE_EMPLOYEES
(
ID NUMBER NOT NULL,
TITLE VARCHAR2(10),
FIRSTNAME VARCHAR2(400) NOT NULL,
LAST_NAME VARCHAR2(400),
GENDER VARCHAR2(1),
BIRTH_DATE DATE NOT NULL,
FNC_ID NUMBER NOT NULL
)
;

CREATE TABLE DOE_FUNCTIONS
(
ID NUMBER NOT NULL,
CODE VARCHAR2(10),
DESCRIPTION VARCHAR2(255),
IND_INSTRUCTOR VARCHAR2(1)
)
;

CREATE TABLE DOE_ARRANGEMENTS
(
ID NUMBER NOT NULL,
DESCRIPTION VARCHAR2(4000) NOT NULL,
TOTAL_COSTS NUMBER,
CMR_ID NUMBER NOT NULL,
ARP_ID NUMBER NOT NULL
)
;

CREATE TABLE DOE_MATERIALS
(
ID NUMBER NOT NULL,
CODE VARCHAR2(100),
DESCRIPTION VARCHAR2(4000),
RATE NUMBER
)
;

CREATE TABLE DOE_MATERIAL_AVAILABILITIES
(
ID NUMBER NOT NULL,
START_DATE DATE NOT NULL,
END_DATE DATE,
MTL_ID NUMBER NOT NULL
)
;

CREATE TABLE DOE_INSTRUCTOR_AVAILABILITIES
(
ID NUMBER NOT NULL,
START_DATE DATE NOT NULL,
END_DATE DATE,
EMP_ID NUMBER NOT NULL,
DAYLY_RATE NUMBER
)
;

CREATE TABLE DOE_ARRANGEMENT_LINES
(
ID NUMBER NOT NULL,
DESCRIPTION VARCHAR2(4000) NOT NULL,
AMOUNT NUMBER,
LINE_COSTS NUMBER,
ART_ID NUMBER NOT NULL,
IAY_ID NUMBER,
MAY_ID NUMBER
)
;

CREATE TABLE DOE_PARTICIPANTS
(
ID NUMBER NOT NULL,
ART_ID NUMBER NOT NULL,
CMR_ID NUMBER NOT NULL
)
;

CREATE TABLE DOE_ARRANGEMENT_TYPES
(
ID NUMBER NOT NULL,
NAME VARCHAR2(4000),
DESCRIPTION VARCHAR2(4000)
)
;

ALTER TABLE DOE_CUSTOMERS
ADD CONSTRAINT DOE_CMR_PK PRIMARY KEY
(
ID
)
 ENABLE
;

ALTER TABLE DOE_ADDRESSES
ADD CONSTRAINT DOE_ADS_PK PRIMARY KEY
(
ID
)
 ENABLE
;

ALTER TABLE DOE_PARTY_ADDRESSES
ADD CONSTRAINT DOE_PAS_PK PRIMARY KEY
(
ID
)
 ENABLE
;

ALTER TABLE DOE_ADDRESS_TYPES
ADD CONSTRAINT DOE_ATE_PK PRIMARY KEY
(
ID
)
 ENABLE
;

ALTER TABLE DOE_EMPLOYEES
ADD CONSTRAINT DOE_EMP_PK PRIMARY KEY
(
ID
)
 ENABLE
;

ALTER TABLE DOE_FUNCTIONS
ADD CONSTRAINT DOE_FNC_PK PRIMARY KEY
(
ID
)
 ENABLE
;

ALTER TABLE DOE_ARRANGEMENTS
ADD CONSTRAINT DOE_ART_PK PRIMARY KEY
(
ID
)
 ENABLE
;

ALTER TABLE DOE_MATERIALS
ADD CONSTRAINT DOE_MTL_PK PRIMARY KEY
(
ID
)
 ENABLE
;

ALTER TABLE DOE_MATERIAL_AVAILABILITIES
ADD CONSTRAINT DOE_MAY_PK PRIMARY KEY
(
ID
)
 ENABLE
;

ALTER TABLE DOE_INSTRUCTOR_AVAILABILITIES
ADD CONSTRAINT DOE_IAY_PK PRIMARY KEY
(
ID
)
 ENABLE
;

ALTER TABLE DOE_ARRANGEMENT_LINES
ADD CONSTRAINT DOE_ARL_PK PRIMARY KEY
(
ID
)
 ENABLE
;

ALTER TABLE DOE_PARTICIPANTS
ADD CONSTRAINT DOE_PTP_PK PRIMARY KEY
(
ID
)
 ENABLE
;

ALTER TABLE DOE_ARRANGEMENT_TYPES
ADD CONSTRAINT DOE_ARP_PK PRIMARY KEY
(
ID
)
 ENABLE
;

ALTER TABLE DOE_PARTY_ADDRESSES
ADD CONSTRAINT DOE_PAS_CMR_FK FOREIGN KEY
(
CMR_ID
)
REFERENCES DOE_CUSTOMERS
(
ID
) ENABLE
;

ALTER TABLE DOE_PARTY_ADDRESSES
ADD CONSTRAINT DOE_PAS_EMP_FK FOREIGN KEY
(
EMP_ID
)
REFERENCES DOE_EMPLOYEES
(
ID
) ENABLE
;

ALTER TABLE DOE_PARTY_ADDRESSES
ADD CONSTRAINT DOE_PAS_ADS_FK FOREIGN KEY
(
ADS_ID
)
REFERENCES DOE_ADDRESSES
(
ID
) ENABLE
;

ALTER TABLE DOE_PARTY_ADDRESSES
ADD CONSTRAINT DOE_PAS_ATE_FK FOREIGN KEY
(
ATE_ID
)
REFERENCES DOE_ADDRESS_TYPES
(
ID
) ENABLE
;

ALTER TABLE DOE_EMPLOYEES
ADD CONSTRAINT DOE_EMP_FNC_FK FOREIGN KEY
(
FNC_ID
)
REFERENCES DOE_FUNCTIONS
(
ID
) ENABLE
;

ALTER TABLE DOE_ARRANGEMENTS
ADD CONSTRAINT DOE_ART_CMR_FK FOREIGN KEY
(
CMR_ID
)
REFERENCES DOE_CUSTOMERS
(
ID
) ENABLE
;

ALTER TABLE DOE_ARRANGEMENTS
ADD CONSTRAINT DOE_ART_ARP_FK FOREIGN KEY
(
ARP_ID
)
REFERENCES DOE_ARRANGEMENT_TYPES
(
ID
) ENABLE
;

ALTER TABLE DOE_MATERIAL_AVAILABILITIES
ADD CONSTRAINT DOE_MAY_MTL_FK FOREIGN KEY
(
MTL_ID
)
REFERENCES DOE_MATERIALS
(
ID
) ENABLE
;

ALTER TABLE DOE_INSTRUCTOR_AVAILABILITIES
ADD CONSTRAINT DOE_IAY_EMP_FK FOREIGN KEY
(
EMP_ID
)
REFERENCES DOE_EMPLOYEES
(
ID
) ENABLE
;

ALTER TABLE DOE_ARRANGEMENT_LINES
ADD CONSTRAINT DOE_ARL_ART_FK FOREIGN KEY
(
ART_ID
)
REFERENCES DOE_ARRANGEMENTS
(
ID
) ENABLE
;

ALTER TABLE DOE_ARRANGEMENT_LINES
ADD CONSTRAINT DOE_ARL_IAY_FK FOREIGN KEY
(
IAY_ID
)
REFERENCES DOE_INSTRUCTOR_AVAILABILITIES
(
ID
) ENABLE
;

ALTER TABLE DOE_ARRANGEMENT_LINES
ADD CONSTRAINT DOE_ARL_MAY_FK FOREIGN KEY
(
MAY_ID
)
REFERENCES DOE_MATERIAL_AVAILABILITIES
(
ID
) ENABLE
;

ALTER TABLE DOE_PARTICIPANTS
ADD CONSTRAINT DOE_PTP_ART_FK FOREIGN KEY
(
ART_ID
)
REFERENCES DOE_ARRANGEMENTS
(
ID
) ENABLE
;

ALTER TABLE DOE_PARTICIPANTS
ADD CONSTRAINT DOE_PTP_CMR_FK FOREIGN KEY
(
CMR_ID
)
REFERENCES DOE_CUSTOMERS
(
ID
) ENABLE
;

ALTER TABLE DOE_CUSTOMERS
ADD CONSTRAINT DOE_CMR_CHK1 CHECK
(gender in ('M', 'F'))
 ENABLE
;

ALTER TABLE DOE_EMPLOYEES
ADD CONSTRAINT DOE_EMP_CHK1 CHECK
(gender in ('M', 'F'))
 ENABLE
;

ALTER TABLE DOE_FUNCTIONS
ADD CONSTRAINT DOE_FNC_CHK1 CHECK
(IND_INSTRUCTOR in ('Y', 'N'))
 ENABLE
;

COMMENT ON COLUMN DOE_ADDRESSES.ADRESS_LINE1 IS 'Street + number'
;

COMMENT ON COLUMN DOE_ADDRESSES.ADRESS_LINE2 IS 'eg. House number addition'
;

COMMENT ON COLUMN DOE_ADDRESSES.ADRESS_LINE3 IS 'eg. Room number, Department'
;

COMMENT ON COLUMN DOE_ADDRESSES.POSTAL_CODE IS 'Postal or Zip Code'
;

COMMENT ON COLUMN DOE_ADDRESSES.CITY IS 'City'
;

COMMENT ON COLUMN DOE_ADDRESSES.COUNTRY IS 'Country'
;

COMMENT ON COLUMN DOE_ARRANGEMENT_LINES.AMOUNT IS 'amount in time or items.'
;

COMMENT ON COLUMN DOE_ARRANGEMENT_LINES.LINE_COSTS IS 'Cost of the line'
;

Prompt Create Triggers
@@doe_owner_triggers.sql
Prompt Create Sequences
@@doe_owner_sequences.sql
Prompt Insert Data
@@insert_data.sql
